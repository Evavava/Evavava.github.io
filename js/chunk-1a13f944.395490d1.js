(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a13f944"],{"071c":function(t,e,i){"use strict";i("4434")},"0c16":function(t,e,i){},2833:function(t,e,i){},"2b38":function(t,e,i){"use strict";i("2833")},"2ca0":function(t,e,i){"use strict";var a=i("23e7"),o=i("06cf").f,c=i("50c4"),n=i("5a34"),s=i("1d80"),r=i("ab13"),l=i("c430"),d="".startsWith,b=Math.min,u=r("startsWith"),h=!l&&!u&&!!function(){var t=o(String.prototype,"startsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!h&&!u},{startsWith:function(t){var e=String(s(this));n(t);var i=c(b(arguments.length>1?arguments[1]:void 0,e.length)),a=String(t);return d?d.call(e,a,i):e.slice(i,i+a.length)===a}})},3184:function(t,e,i){"use strict";(function(t){var a=i("2909"),o=(i("a4d3"),i("e01a"),i("99af"),i("4de4"),i("d81d"),i("159b"),i("2ca0"),i("c7f8")),c=i("c470"),n=i("6701"),s=i("da6f"),r=i("73f5"),l=i("fa7d"),d=i("e8ec"),b=i("a211"),u=i("2f32"),h=i("ac0d");t.ePub=b["a"],e["a"]={mixins:[h["c"]],components:{DetailTitle:o["a"],Scroll:n["a"],BookInfo:c["a"]},computed:{desc:function(){return this.description?this.description.substring(0,100):""},flatNavigation:function(){return this.navigation?Array.prototype.concat.apply([],Array.prototype.concat.apply([],this.doFlatNavigation(this.navigation.toc))):[]},lang:function(){return this.metadata?this.metadata.language:"-"},isbn:function(){return this.metadata?this.metadata.identifier:"-"},publisher:function(){return this.metadata?this.metadata.publisher:"-"},title:function(){return this.metadata?this.metadata.title:""},author:function(){return this.metadata?this.metadata.creator:""},inBookShelf:function(){var t=this;if(this.bookItem&&this.shelfList){var e=function t(e){var i;return(i=[]).concat.apply(i,Object(a["a"])(e.map((function(e){return e.itemList?[e].concat(Object(a["a"])(t(e.itemList))):e}))))}(this.shelfList).filter((function(t){return 1===t.type})),i=e.filter((function(e){return e.fileName===t.bookItem.fileName}));return i&&i.length>0}return!1}},data:function(){return{bookShelf:null,bookItem:null,book:null,metadata:null,trialRead:null,cover:null,navigation:null,displayed:!1,audio:null,randomLocation:null,description:null,toastText:"",trialText:null,categoryText:null,opf:null}},methods:{addOrRemoveShelf:function(){var t=this;this.inBookShelf?this.setShelfList(Object(s["k"])(this.bookItem)).then((function(){Object(d["k"])(t.shelfList)})):(Object(s["a"])(this.bookItem),this.setShelfList(Object(d["c"])()))},showToast:function(t){this.toastText=t;var e=new u["a"](t);e.setTimeUnmount(1500)},readBook:function(){this.$router.push({path:"/ebook/".concat(this.bookItem.categoryText,"|").concat(this.fileName)})},trialListening:function(){},read:function(t){},itemStyle:function(t){return{marginLeft:(t.deep-1)*Object(l["a"])(20)+"rem"}},doFlatNavigation:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=[];return t.forEach((function(t){t.deep=i,a.push(t),t.subitems&&t.subitems.length>0&&a.push(e.doFlatNavigation(t.subitems,i+1))})),a},initBook:function(){},downloadBook:function(){var t="".concat("http://localhost:8090/epub","/").concat(this.bookItem.categoryText,"/").concat(this.bookItem.fileName,"/OEBPS/package.opf");this.parseBook(t)},parseBook:function(t){var e=this;this.book=new b["a"](t),this.book.loaded.metadata.then((function(t){e.metadata=t})),this.book.loaded.navigation.then((function(t){e.navigation=t}))},findBookFromList:function(t){},init:function(){var t=this;this.fileName=this.$route.query.fileName,this.categoryText=this.$route.query.category,this.fileName&&Object(r["a"])({fileName:this.fileName}).then((function(e){if(200===e.status&&0===e.data.error_code&&e.data.data){var i=e.data.data;t.bookItem=i,t.cover=t.bookItem.cover;var a=i.rootFile;a.startsWith("/")&&(a=a.substring(1,a.length)),t.opf="".concat("http://localhost:8090/epub2","/").concat(t.fileName,"/").concat(a),t.parseBook(t.opf)}else t.showToast(e.data.msg)}))},back:function(){this.$router.go(-1)},display:function(t){if(this.$refs.preview)return this.rendition||(this.rendition=this.book.renderTo("preview",{width:window.innerWidth>640?640:window.innerWidth,height:window.innerHeight,method:"default"})),t?this.rendition.display(t):this.rendition.display()},onScroll:function(t){t>Object(l["b"])(42)?this.$refs.title.showShadow():this.$refs.title.hideShadow()}},mounted:function(){this.init(),this.shelfList&&0!==this.shelfList.length||this.getShelfList()}}}).call(this,i("c8ba"))},4434:function(t,e,i){},"5a34":function(t,e,i){var a=i("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5bab":function(t,e,i){"use strict";i.r(e);var a=i("7a23"),o=Object(a["O"])("data-v-5fa5dc3e");Object(a["x"])("data-v-5fa5dc3e");var c={class:"book-detail"},n={class:"book-detail-content-wrapper"},s={class:"book-detail-content-title"},r={class:"book-detail-content-list-wrapper"},l={class:"book-detail-content-row"},d={class:"book-detail-content-label"},b={class:"book-detail-content-text"},u={class:"book-detail-content-row"},h={class:"book-detail-content-label"},j={class:"book-detail-content-text"},f={class:"book-detail-content-row"},p={class:"book-detail-content-label"},v={class:"book-detail-content-text"},O={class:"book-detail-content-row"},k={class:"book-detail-content-label"},g={class:"book-detail-content-text"},m={class:"book-detail-content-wrapper"},w={class:"book-detail-content-title"},S={class:"book-detail-content-list-wrapper"},y={key:0,class:"loading-text-wrapper"},x={class:"loading-text"},$={class:"book-detail-content-item-wrapper"},B={class:"book-detail-content-wrapper"},G={class:"book-detail-content-title"},N={class:"book-detail-content-list-wrapper"},L={key:0,class:"loading-text-wrapper"},T={class:"loading-text"},I={id:"preview",ref:"preview"},C={class:"bottom-wrapper"},_={key:0,class:"icon-check"};Object(a["v"])();var W=o((function(t,e,i,W,F,H){var A=Object(a["C"])("detail-title"),R=Object(a["C"])("book-info"),E=Object(a["C"])("scroll");return Object(a["u"])(),Object(a["g"])("div",c,[Object(a["j"])(A,{onBack:H.back,showShelf:!0,ref:"title"},null,8,["onBack"]),Object(a["j"])(E,{class:"content-wrapper",top:42,bottom:52,onOnScroll:H.onScroll,ref:"scroll"},{default:o((function(){return[Object(a["j"])(R,{cover:F.cover,title:H.title,author:H.author,desc:H.desc},null,8,["cover","title","author","desc"]),Object(a["j"])("div",n,[Object(a["j"])("div",s,Object(a["G"])(t.$t("detail.copyright")),1),Object(a["j"])("div",r,[Object(a["j"])("div",l,[Object(a["j"])("div",d,Object(a["G"])(t.$t("detail.publisher")),1),Object(a["j"])("div",b,Object(a["G"])(H.publisher),1)]),Object(a["j"])("div",u,[Object(a["j"])("div",h,Object(a["G"])(t.$t("detail.category")),1),Object(a["j"])("div",j,Object(a["G"])(F.categoryText),1)]),Object(a["j"])("div",f,[Object(a["j"])("div",p,Object(a["G"])(t.$t("detail.lang")),1),Object(a["j"])("div",v,Object(a["G"])(H.lang),1)]),Object(a["j"])("div",O,[Object(a["j"])("div",k,Object(a["G"])(t.$t("detail.ISBN")),1),Object(a["j"])("div",g,Object(a["G"])(H.isbn),1)])])]),Object(a["j"])("div",m,[Object(a["j"])("div",w,Object(a["G"])(t.$t("detail.navigation")),1),Object(a["j"])("div",S,[F.navigation?Object(a["h"])("",!0):(Object(a["u"])(),Object(a["g"])("div",y,[Object(a["j"])("span",x,Object(a["G"])(t.$t("detail.loading")),1)])),Object(a["j"])("div",$,[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(H.flatNavigation,(function(t,e){return Object(a["u"])(),Object(a["g"])("div",{class:"book-detail-content-item",key:e,onClick:function(e){return H.read(t)}},[t.label?(Object(a["u"])(),Object(a["g"])("div",{key:0,class:["book-detail-content-navigation-text",{"is-sub":t.deep>1}],style:H.itemStyle(t)},Object(a["G"])(t.label),7)):Object(a["h"])("",!0)],8,["onClick"])})),128))])])]),Object(a["j"])("div",B,[Object(a["j"])("div",G,Object(a["G"])(t.$t("detail.trial")),1),Object(a["j"])("div",N,[F.displayed?Object(a["h"])("",!0):(Object(a["u"])(),Object(a["g"])("div",L,[Object(a["j"])("span",T,Object(a["G"])(t.$t("detail.loading")),1)]))]),Object(a["L"])(Object(a["j"])("div",I,null,512),[[a["J"],F.displayed]])])]})),_:1},8,["onOnScroll"]),Object(a["j"])("div",C,[Object(a["j"])("div",{class:"bottom-btn",onClick:e[1]||(e[1]=Object(a["N"])((function(t){return H.readBook()}),["stop","prevent"]))},Object(a["G"])(t.$t("detail.read")),1),Object(a["j"])("div",{class:"bottom-btn",onClick:e[2]||(e[2]=Object(a["N"])((function(t){return H.trialListening()}),["stop","prevent"]))},Object(a["G"])(t.$t("detail.listen")),1),Object(a["j"])("div",{class:"bottom-btn",onClick:e[3]||(e[3]=Object(a["N"])((function(t){return H.addOrRemoveShelf()}),["stop","prevent"]))},[H.inBookShelf?(Object(a["u"])(),Object(a["g"])("span",_)):Object(a["h"])("",!0),Object(a["i"])(" "+Object(a["G"])(H.inBookShelf?t.$t("detail.isAddedToShelf"):t.$t("detail.addOrRemoveShelf")),1)])])])})),F=i("3184");i("efb9");F["a"].render=W,F["a"].__scopeId="data-v-5fa5dc3e";e["default"]=F["a"]},ab13:function(t,e,i){var a=i("b622"),o=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[o]=!1,"/./"[t](e)}catch(a){}}return!1}},c470:function(t,e,i){"use strict";var a=i("7a23"),o=Object(a["O"])("data-v-302dc34d");Object(a["x"])("data-v-302dc34d");var c={class:"cover-title-wrapper"},n={class:"cover-title-left-wrapper"},s={class:"cover-title-right-wrapper"},r={class:"detail-cover-title-wrapper"},l={class:"cover-title-text"},d={class:"cover-author-wrapper"},b={class:"cover-author-text"},u={class:"detail-cover-description-wrapper"},h={class:"detail-cover-description-text"};Object(a["v"])();var j=o((function(t,e,i,o,j,f){var p=Object(a["D"])("lazy");return Object(a["u"])(),Object(a["g"])("div",c,[Object(a["j"])("div",n,[Object(a["L"])((Object(a["u"])(),Object(a["g"])("img",{class:"cover-img",key:i.cover},null,512)),[[p,i.cover]])]),Object(a["j"])("div",s,[Object(a["j"])("div",r,[Object(a["j"])("div",l,Object(a["G"])(i.title),1)]),Object(a["j"])("div",d,[Object(a["j"])("div",b,Object(a["G"])(i.author),1)]),Object(a["j"])("div",u,[Object(a["j"])("div",h,Object(a["G"])(i.desc),1)])])])})),f={props:{cover:String,title:String,author:String,desc:String}};i("2b38");f.render=j,f.__scopeId="data-v-302dc34d";e["a"]=f},c7f8:function(t,e,i){"use strict";var a=i("7a23"),o=Object(a["O"])("data-v-1aed9607");Object(a["x"])("data-v-1aed9607");var c=Object(a["j"])("span",{class:"icon-back"},null,-1),n={class:"title-right-wrapper"},s={key:1,class:"icon-share"},r={class:"title-text"};Object(a["v"])();var l=o((function(t,e,i,o,l,d){return Object(a["u"])(),Object(a["g"])("div",{class:["detail-title-wrapper",{"hide-shadow":l.ifHideShadow}]},[Object(a["j"])("div",{class:"title-left-wrapper",onClick:e[1]||(e[1]=function(){return d.back&&d.back.apply(d,arguments)})},[c]),Object(a["j"])("div",n,[i.showShelf?(Object(a["u"])(),Object(a["g"])("span",{key:0,class:"icon-shelf icon",onClick:e[2]||(e[2]=function(){return d.showBookShelf&&d.showBookShelf.apply(d,arguments)})})):(Object(a["u"])(),Object(a["g"])("span",s))]),Object(a["j"])("div",r,Object(a["G"])(i.title),1)],2)})),d={props:{title:String,showShelf:{type:Boolean,default:!0}},data:function(){return{ifHideShadow:!0}},methods:{showBookShelf:function(){this.$router.push("/store/shelf")},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},back:function(){this.$emit("back")}}};i("071c");d.render=l,d.__scopeId="data-v-1aed9607";e["a"]=d},efb9:function(t,e,i){"use strict";i("0c16")}}]);
//# sourceMappingURL=chunk-1a13f944.395490d1.js.map